function t_slider__init(e,t){var i=document.getElementById("rec"+e);if(i){var r=i.querySelector("."+t+"__slider");if(r){var n=r.getElementsByClassName(t+"__item");if(n.length){t_slider__calcMaxSlideHeight(t,r);var d=i.querySelector("."+t+"__control_left"),l=i.querySelector("."+t+"__control_right"),a=!1,o=function e(t){a||(a=!0,t_slider__nextSlide(r,n,t).then((function(){a=!1})))};d&&d.addEventListener("click",o.bind(null,"backwards")),l&&l.addEventListener("click",o.bind(null,"forwards"));var s=parseInt(r.getAttribute("data-slide-timeout"),10)||0,u={timeoutId:null},c=t_slider__stopAutoSlides.bind(null,u),_=t_slider__startAutoSlides.bind(null,r,n,s,u),f;if(s){r.addEventListener("mouseenter",c),r.addEventListener("mouseleave",_),r.addEventListener("mousemove",c,{once:!0}),r.addEventListener("touchstart",c);var v=function e(t,i,r){t.addEventListener("mouseenter",i),t.addEventListener("mouseleave",r),t.addEventListener("focus",i),t.addEventListener("blur",r)},m;d&&v(d,c,_),l&&v(l,c,_),new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?(r.setAttribute("data-visible","true"),_()):(r.removeAttribute("data-visible"),c())}))}),{threshold:.1}).observe(r)}i.querySelectorAll("."+t+"__play-btn").forEach((function(e){e.addEventListener("click",t_slider__handlePlayClick.bind(null,r,e,c,t))}));var g=i.querySelector("."+t);g&&["tildaclamp:update","displayChanged"].forEach((function(e){g.addEventListener(e,(function(){t_slider__calcMaxSlideHeight(t,r)}))})),r.addEventListener("wheel",t_throttle((function(){t_slider__handleWheel(r,n)}),300)),window.addEventListener("resize",t_throttle((function(){t_slider__calcMaxSlideHeight(t,r)}),300)),t_slider__dragSlide(t,r),t_slider__initChangeListenerInEditMode(r,n)}}}}function t_slider__dragSlide(e,t){var i=document.getElementById("allrecords"),r;if(!(i&&"edit"===i.getAttribute("data-tilda-mode"))){var n={startScrollLeft:0,startClientX:0,isDragging:!1,minDelta:10},d=function i(r){r.preventDefault();var d=r.clientX-n.startClientX;n.isDragging?(t.scrollLeft=n.startScrollLeft-1.5*d,t.dispatchEvent(new Event("wheel"))):Math.abs(d)>n.minDelta&&(t.classList.add(e+"__slider_dragging"),n.isDragging=!0)},l=function i(){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",l),n.startScrollLeft=0,n.startClientX=0,n.isDragging=!1,document.documentElement.style.removeProperty("user-select"),document.documentElement.style.removeProperty("-webkit-user-select"),t.classList.remove(e+"__slider_dragging")};t.addEventListener("mousedown",(function(e){n.startScrollLeft=t.scrollLeft,n.startClientX=e.clientX,document.addEventListener("mousemove",d),document.addEventListener("mouseup",l),document.documentElement.style.setProperty("user-select","none"),document.documentElement.style.setProperty("-webkit-user-select","none")}))}}function t_slider__initChangeListenerInEditMode(e,t){var i=document.getElementById("allrecords"),r,n;i&&"edit"===i.getAttribute("data-tilda-mode")&&"MutationObserver"in window&&new MutationObserver((function(i){i.forEach((function(i){if("childList"===i.type&&(i.addedNodes.length||i.removedNodes.length)){var r=parseInt(e.getAttribute("data-active-slide-index"),10)||0,n=t[r];if(n){var d=window.getComputedStyle(e),l=parseInt(d.getPropertyValue("padding-left"),10)||0;e.scrollLeft=n.offsetLeft-l}}}))})).observe(e,{childList:!0})}function t_slider__startAutoSlides(e,t,i,r){r.timeoutId||"true"!==e.getAttribute("data-visible")||"true"===e.getAttribute("data-video-playing")||(r.timeoutId=window.setTimeout((function(){t_slider__nextSlide(e,t,"forwards").then((function(){r.timeoutId&&(r.timeoutId=null,t_slider__startAutoSlides(e,t,i,r))}))}),i))}function t_slider__stopAutoSlides(e){window.clearTimeout(e.timeoutId),e.timeoutId=null}function t_slider__nextSlide(e,t,i){void 0===i&&(i="forwards");var r=t_slider__getCurrentSlideIndex(t=Array.from(t)),n=t[r],d=t_slider__getNextSlideIndex(e,t,i,r),l=t[d];n.setAttribute("aria-current","false"),l.setAttribute("aria-current","true");var a=window.getComputedStyle(e),o=parseInt(a.getPropertyValue("padding-left"),10)||0,s=l.offsetLeft-o;return e.setAttribute("data-active-slide-index",d),t_slider__smoothMoveToNextSlide(e,s),new Promise((function(e){var t=600;window.setTimeout(e,t)}))}function t_slider__smoothMoveToNextSlide(e,t,i){if(void 0===i&&(i=600),e){var r=e.scrollLeft,n=t-r;if(n){e.style.scrollSnapType="none";var d=e.scrollLeft,l=performance.now();requestAnimationFrame(a)}}function a(r){var o=r-l,s=Math.min(o/i,1);e.scrollLeft=d+n*t_slider__adjustedEasing(s),s<1?requestAnimationFrame(a):(e.scrollLeft=t,e.style.scrollSnapType="")}}function t_slider__adjustedEasing(e){var t=.05,i=Math.min(e+t*(1-e),1);return i<.5?4*Math.pow(i,3):1-Math.pow(-2*i+2,3)/2}function t_slider__getNextSlideIndex(e,t,i,r){var n="forwards"===i,d,l=r+(n?1:-1),a;if(l>=t.length&&(l=0),l<0&&(l=t.length-1),e.scrollWidth-e.scrollLeft-e.clientWidth<1)if(n)l=0;else for(;l>0;){var o;if(t[l].offsetLeft<e.scrollLeft)break;l--}return l}function t_slider__getCurrentSlideIndex(e){return Math.max(e.findIndex(t),0);function t(e){return"true"===e.getAttribute("aria-current")}}function t_slider__handleWheel(e,t){var i=(t=Array.from(t)).findIndex((function(e){return"true"===e.getAttribute("aria-current")})),r,n;-1===i&&(i=0),t[i].setAttribute("aria-current","false");for(var d=e.scrollLeft,l=window.getComputedStyle(e),a=parseInt(l.getPropertyValue("padding-left"),10)||0,o=t.map((function(e){return e.offsetLeft-d})),s={},u=o.filter((function(e,t){return e>=a-1&&(s[t]=e,!0)})),c=Math.min.apply(null,u),_=-1,f=0,v=Object.entries(s);f<v.length;f++){var m=v[f];if(m[1]===c){_=+m[0];break}}-1===_&&(_=0),t[_].setAttribute("aria-current","true"),e.setAttribute("data-active-slide-index",_)}function t_slider__handlePlayClick(e,t,i,r){if(!t.disabled){t_slider__stopVideos(e,r),t.disabled=!0;var n=t.closest("."+r+"__item");if(n){var d=n.querySelector(".t-video-lazyload");d&&(e.setAttribute("data-video-playing","true"),i(),t_onFuncLoad("t_video_lazyload__addVideo",(function(){n.classList.add(r+"__item_video-playing"),t_video_lazyload__addVideo(d)})))}}}function t_slider__stopVideos(e,t){var i;e.removeAttribute("data-video-playing"),e.querySelectorAll("."+t+"__item").forEach((function(e){e.classList.remove(t+"__item_video-playing");var i=e.querySelector("."+t+"__video .t-video-lazyload");i&&(i.innerHTML="",i.setAttribute("data-videolazy-load","false"));var r=e.querySelector("."+t+"__play-btn");r&&(r.disabled=!1)}))}function t_slider__calcMaxSlideHeight(e,t){if("t1186"===e){var i=t.querySelectorAll("."+e+"__card"),r=0;i.forEach((function(e){e.style.height=""})),i.forEach((function(e){var t=e.querySelector(".t-text-clamp__inner");t&&"true"===t.getAttribute("data-expanded")||e.clientHeight>r&&(r=e.clientHeight)})),i.forEach((function(e){var t=e.querySelector(".t-text-clamp__inner");t&&"true"===t.getAttribute("data-expanded")||(e.style.height=r+"px")}))}}
